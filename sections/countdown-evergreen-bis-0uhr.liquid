{% if request.design_mode == false %}
  <script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function() {
      var second = 1000,
          minute = second * 60,
          hour = minute * 60;

      function updateTimer() {
        var now = new Date();
        var endOfDay = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 23, 59, 59); // Setzt das Ende des Tages
        var distance = endOfDay - now;

        // Timer-Aktualisierungslogik
        var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        var seconds = Math.floor((distance % (1000 * 60)) / 1000);

        document.querySelector('.js-timer-hours').innerText = hours;
        document.querySelector('.js-timer-minutes').innerText = minutes;
        document.querySelector('.js-timer-seconds').innerText = seconds;

        document.querySelector('.timer-display').style.opacity = 1; // Setzt die Opazität des Timer-Displays auf 1
      }

      // Initialisiert den Timer sofort und wiederholt die Update-Funktion jede Sekunde
      updateTimer();
      var x = setInterval(updateTimer, second);
    });
  </script>
{% endif %}
<style>
    /* Deine Styles bleiben gleich */
    .timer {
      background: #f4f4f4;
      padding: 10px;
      text-align: center;
      margin-bottom: 20px;
      border-bottom: 1px solid lightgray;
    }
    .timer-display {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      max-width: 500px;
      margin: auto;
      opacity: 0; /* Timer-Blöcke unsichtbar machen */
      transition: opacity 0.2s ease-in-out; /* Sanfter Einblende-Effekt für Timer-Blöcke */
    }
    .timer-block {
      flex: 1;
      min-width: 50px;
      padding: 10px 10px 5px 10px;
      background: white;
      border: 5px solid #f4f4f4;
      border-radius: 10px;
      box-shadow: inset 0px 0px 5px #00000045;
      margin: 5px;
    }
    .timer-block__num,
    .timer-block__unit {
      display: block;
      text-align: center;
      line-height: 18px;
      font-size: 20px;
      font-family: 'Rajdhani', sans-serif;
      font-weight: 600;
    }
    .timer-block__unit {
      font-size: 14px;
      font-weight: 500;
    }
    .timer-block.hidden {
      display: none;
    }
    h4.timer__title {
      margin: 0px;
    }
</style>

<div class="timer">
  <span>Aktion läuft ab in..</span>
  <div class="timer-display">
    <div class="timer-block">
      <span class="timer-block__num js-timer-hours">00</span>
      <span class="timer-block__unit">Stunden</span>
    </div>
    <div class="timer-block">
      <span class="timer-block__num js-timer-minutes">00</span>
      <span class="timer-block__unit">Minuten</span>
    </div>
    <div class="timer-block">
      <span class="timer-block__num js-timer-seconds">00</span>
      <span class="timer-block__unit">Sekunden</span>
    </div>
  </div>
</div>


{% schema %}
{
  "name": "Evergreen Countdown 0 Uhr",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Titel",
      "default": "Countdown bis Mitternacht"
    }
  ],
  "presets": [
    {
      "name": "Evergreen Countdown 0 Uhr",
      "category": "Custom"
    }
  ]
}
{% endschema %}

